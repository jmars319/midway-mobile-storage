/* Modal, toasts, app-modal and small utilities */
/* Toasts/Modal minor tweaks to match admin look */
#toast-container .toast { border-radius:8px; font-weight:600; box-shadow:0 8px 18px rgba(2,6,23,0.12); }
#modal { border-radius:12px; }

/* App modal specific styles (replaces inline styles for #app-modal dialog) */
.modal-backdrop { position:fixed; inset:0; background:rgba(0,0,0,.45); display:none; align-items:center; justify-content:center; z-index:50000 }
.app-modal-dialog { background:var(--card-bg, #fff); max-width:720px; width:95%; margin:auto; padding:1rem; border-radius:6px; box-shadow:0 10px 30px rgba(0,0,0,.4) }
.app-modal-close { float:right }
.app-modal-body { clear:both; max-height:60vh; overflow:auto }
.app-modal-table { width:100%; border-collapse:collapse }
.app-modal-table th { text-align:left; padding:.25rem .5rem }
.app-modal-table td { padding:.25rem .5rem }

/* helper for small muted footers */
.muted-footer { font-size: 0.875rem }

#modal { background:white; padding:0; border-radius:10px; max-width:520px; width:92%; box-shadow:0 12px 36px rgba(2,6,23,0.18); overflow:hidden }
#modal-header { display:flex; align-items:center; justify-content:space-between; padding:1rem 1.25rem; border-bottom:1px solid rgba(0,0,0,0.04); }
#modal-title { margin:0; font-size:1rem }
#modal-close { background:transparent; border:none; font-size:1.05rem; cursor:pointer }

#modal-title { color: var(--text-primary); }
#modal-close { color: var(--text-primary); opacity: 0.95; }
#modal-close:hover, #modal-close:focus { color: var(--primary-color); opacity: 1; outline: none; }

/* Make ghost/cancel buttons inside modal actions clearly readable and match brand */
.admin #modal .actions .btn-ghost { color: var(--admin-modal-text); -webkit-text-fill-color: var(--admin-modal-text); border-color: rgba(15,23,42,0.06); }
.admin #modal .actions .btn-ghost:hover, .admin #modal .actions .btn-ghost:focus { background: color-mix(in srgb, var(--primary-color) 6%, var(--card-bg) 94%); color: var(--primary-color); -webkit-text-fill-color: var(--primary-color); }

/* Force modal content to use the brand text color so labels and content are
	readable even when the page default is an inverse (light) color. Keep
	button colors intact by setting a specific rule for ghost buttons below. */
#modal { color: var(--text-primary); }
#modal .modal-body { color: var(--text-primary); }

/* Dark mode: ensure admin modal surface is darker so light text remains readable */
@media (prefers-color-scheme: dark) {
	/* Apply the same darker surface and text rules to all admin modal variants */
	.admin #modal,
	.admin .modal,
	.admin .app-modal-dialog {
		/* darken the card background slightly in dark mode to provide contrast */
		background: color-mix(in srgb, var(--card-bg) 82%, black 18%);
		box-shadow: 0 12px 36px rgba(0,0,0,0.6);
		border: 1px solid rgba(255,255,255,0.04);
	}

	/* Ensure modal text and cancel/ghost button labels use the admin modal text token */
	.admin #modal .modal-body,
	.admin .modal .modal-body,
	.admin .app-modal-dialog,
	.admin #modal #modal-title,
	.admin #modal #modal-close,
	.admin #modal #modal-cancel,
	.admin #modal .actions .btn-ghost,
	.admin .modal .actions .btn-ghost,
	.admin .app-modal-dialog .app-modal-body {
		color: var(--admin-modal-text);
		-webkit-text-fill-color: var(--admin-modal-text);
	}

	/* Modal actions background/separator adjustments */
	.admin #modal .actions,
	.admin .modal .actions,
	.admin .app-modal-dialog .app-modal-body {
		background: color-mix(in srgb, var(--card-bg) 90%, black 10%);
		border-top: 1px solid rgba(255,255,255,0.03);
	}
}
/* Ensure text inside modal inherits the dark color; leave controls that set
	their own colors (like .btn-primary) untouched. */
#modal .modal-body * { color: inherit; }
.admin #modal .actions .btn-ghost { color: var(--admin-modal-text); -webkit-text-fill-color: var(--admin-modal-text); }

/* Explicit target for the modal Cancel button used in the image picker */
.admin #modal #modal-cancel { color: var(--admin-modal-text); -webkit-text-fill-color: var(--admin-modal-text); border-color: rgba(15,23,42,0.06); }

/* Ensure any child text inside modal ghost buttons follows the filled color */
.admin #modal .actions .btn-ghost, .admin #modal .actions .btn-ghost * { color: var(--admin-modal-text); -webkit-text-fill-color: var(--admin-modal-text); }

.admin .modal-ensure-dark-text, .admin #modal, .admin #modal #modal-title, .admin #modal #modal-close, .admin #modal #modal-body { color: var(--admin-modal-text); }
.admin #modal :not(button):not(.btn) { color: var(--admin-modal-text); }
.modal-body { padding:1rem 1.25rem; color:var(--admin-text) }
.modal .actions { padding: .75rem 1.25rem; display:flex; justify-content:flex-end; gap:.5rem; border-top:1px solid rgba(0,0,0,0.04); background:var(--card-bg) }

/* Utility classes used by admin JS */
.muted { color: var(--muted) !important; }
.muted-text { color: var(--text-muted, #94a3b8) !important; }
.section-wrap { border: 1px solid var(--admin-border); padding: .6rem; margin-bottom: .8rem; border-radius:6px; background: var(--card-bg); }
.menu-item-row { display: grid; grid-template-columns: 1fr 200px; gap: .5rem; margin-top:.5rem; border-top: 1px dashed var(--admin-border); padding-top:.5rem; }
.preview-area { border: 1px solid var(--admin-border); border-radius:8px; padding:.6rem; background: var(--card-bg); min-height:240px; overflow:auto }
.toast { background: var(--surface-dark); color: var(--text-on-dark); padding:.6rem .8rem; border-radius:6px; box-shadow:0 6px 18px rgba(0,0,0,.2); opacity:.95 }
.toast.success { background: var(--admin-success); color: var(--card-bg); }
.toast.error { background: var(--admin-danger); color: var(--card-bg); }

/* Button hover transform handled via CSS to avoid inline style writes */
.btn { transition: transform .18s ease, box-shadow .18s ease; }
.btn:hover, .btn:focus { transform: translateY(-2px) scale(1.02); }

/* Card hover transform via CSS */
.card { transition: transform .22s cubic-bezier(.2,.9,.22,1); }
.card:hover { transform: translateY(-8px) rotateX(2deg); }

/* Ripple effect using CSS variables set by JS */
.ripple { position: absolute; pointer-events: none; border-radius: 50%; overflow: hidden; transform: translate3d(0,0,0); left: 0; top: 0; width: var(--ripple-size, 0); height: var(--ripple-size, 0); left: var(--ripple-x, 0); top: var(--ripple-y, 0); background: rgba(255,255,255,0.18); opacity: 0.9; animation: ripple-anim 600ms ease-out forwards; z-index: 2; }

@keyframes ripple-anim { from { transform: scale(0); opacity: 0.9; } to { transform: scale(1.6); opacity: 0; } }

/* Parallax: uses CSS variable --parallax-y set by JS */
.hero { transform: translateY(var(--parallax-y, 0)); transition: transform .08s linear; }

/* Small helper used by change-password strength indicator */
.strength-helper { margin-top: .25rem; }

/* Small utility margins and helpers used to replace inline styles */
.ml-025 { margin-left: .25rem !important; }
.ml-08 { margin-left: .8rem !important; }
.mt-06 { margin-top: .6rem !important; }
.min-w-140 { min-width: 140px !important; }

/* Image preview helper used in admin index previews */
.img-preview-small { max-width: 280px; max-height: 140px; object-fit: contain; border: 1px solid rgba(0,0,0,0.06); padding: .25rem; }

/* Hours modal row helper and text-capitalize helper */
.hours-row { display:flex; justify-content:space-between; padding:.25rem 0; }
.text-capitalize { text-transform: capitalize; }

/* Selector row used in the email scheduler supplier editor */
.selector-row { display:flex; gap:.4rem; }


/* Responsive */
@media (max-width:900px){ .content-editor{ flex-direction:column; } }

/* Centralized page-level helpers moved from per-page inline <style> blocks */
.admin table { width:100%; border-collapse:collapse }
.admin table th, .admin table td { padding:8px; border:1px solid var(--admin-border); text-align:left }
.admin table th { background: color-mix(in srgb, var(--card-bg) 88%, black 6%) }
.admin .small{ font-size:0.9rem; color:var(--muted) }
.admin .top-actions{ margin-bottom:1rem }

/* Toast container used by multiple admin pages */
#toast-container { position: fixed; right: 1rem; top: 1rem; z-index: 50010; display:flex; flex-direction:column; gap:.5rem; }

/* Images modal (used by admin.js show-all images) */
#images-modal-backdrop { position: fixed; inset: 0; background: rgba(0,0,0,0.45); display: none; align-items: center; justify-content: center; z-index: 50000; }
#images-modal-backdrop.images-modal-open { display: flex; }
#images-modal { background: var(--card-bg); border-radius:10px; max-width: 1000px; width: calc(100% - 48px); max-height: 80vh; overflow: auto; box-shadow: 0 12px 40px rgba(2,6,23,0.35); padding: 1rem; box-sizing: border-box; position: relative; }
#images-modal { /* ensure modal is centered in viewport even if other styles conflict */ position: fixed !important; top: 50% !important; left: 50% !important; transform: translate(-50%, -50%) !important; }
#images-modal .modal-header { display:flex; align-items:center; justify-content:space-between; margin-bottom:.5rem }
#images-modal .close-btn { background: color-mix(in srgb, var(--card-bg, #fff) 92%, black 8%); color: var(--text-primary, #0b1220); padding:6px 10px; border-radius:8px; border:1px solid rgba(0,0,0,0.06); font-size:1.15rem; line-height:1; cursor:pointer; display:inline-flex; align-items:center; justify-content:center; box-shadow:0 6px 18px rgba(2,6,23,0.12); }
#images-modal .close-btn:hover { transform: translateY(-1px); box-shadow:0 10px 26px rgba(2,6,23,0.14); }
#images-modal .close-btn:focus { outline:3px solid color-mix(in srgb, var(--primary-color, #2563eb) 12%, var(--card-bg, #fff) 88%); }

/* Ensure the global image list shows when .show is present */
#image-list { transition: max-height .28s cubic-bezier(.2,.9,.22,1), opacity .22s ease; overflow: hidden; max-height: 0; opacity: 0; }
#image-list.show { max-height: 1400px; opacity: 1; }

/* Utility classes used by admin.js to avoid inline styles */
.field-wrap { margin-bottom: .6rem; }
.field-label { display:block; font-weight:600; }
.field-textarea { width:100%; min-height:80px; }
.field-input { width:100%; }
.field-input-flex { flex:1; }
.field-row { display:flex; gap:.5rem; }
.flex-row { display:flex; align-items:center; gap:1rem; margin-bottom:.5rem; }
.flex-row-sm { display:flex; align-items:center; gap:.6rem; margin-bottom:.4rem; }
.mb-06 { margin-bottom:.6rem; }

/* Picker grid / thumbnails */
.picker-grid { max-height:320px; overflow:auto; display:flex; flex-wrap:wrap; gap:.5rem; }
.thumb { width:120px; cursor:pointer; text-align:center; }
.thumb img { width:100%; height:80px; object-fit:cover; }
.thumb-label { font-size:.8rem; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }

.img-48 { height:48px; object-fit:cover; }
.img-120x80 { width:120px; height:80px; object-fit:cover; }
.img-96x64 { width:96px; height:64px; object-fit:cover; border:1px solid rgba(0,0,0,0.04); border-radius:6px; }
.img-80x60 { width:80px; height:60px; object-fit:cover; border:1px solid rgba(0,0,0,0.04); border-radius:6px; }

.el-inline { display:inline-block; margin-right:.5rem; text-align:center; width:80px; }
.caption-small { font-size:0.72rem; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }

.image-meta { flex:1; min-width:120px; overflow:hidden; }
.meta-name { font-size:.8rem; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }

/* Flex and spacing helpers */
.flex-1 { flex: 1; }
.mt-04 { margin-top: .4rem; }
.mb-04 { margin-bottom: .4rem; }
.mt-03 { margin-top: .3rem; }

/* small min-height helpers used by JS */
.min-h-48 { min-height: 48px; }

/* 60px helper used by makeTextarea */
.min-h-60 { min-height: 60px; }

/* Small caption */
.caption-small { font-size:0.72rem; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }

/* Show/block helper used by menus */
.show-block { display: block !important; }

/* Upload progress bar: use CSS variable --w for dynamic width instead of inline style */
.image-upload-progress .bar { background: color-mix(in srgb, var(--card-bg) 92%, black 8%); border-radius:6px; overflow:hidden; height:10px; width:100%; }
.image-upload-progress .fill { display:block; height:100%; background: linear-gradient(90deg, var(--primary-color, #2563eb), color-mix(in srgb, var(--primary-color, #2563eb) 40%, black 10%)); width: var(--w, 0%); transition: width .18s ease; }

/* small image preview helpers */
.img-48 { height:48px; object-fit:cover; }
.preview-img { width:100%; height:80px; object-fit:cover; margin-top:.4rem; }

/* profile menu helper: default hidden; .show-block toggles visibility */
#profile-menu { display:none; }
#profile-menu.show-block { display:block; }

/* Modal backdrop open state for generic modal (#modal-backdrop) */
#modal-backdrop { display:none; align-items:center; justify-content:center; position:fixed; inset:0; background:rgba(0,0,0,.45); z-index:9999; }
#modal-backdrop.open { display:flex; }

/* Toast fade-out helper */
.toast.fade-out { opacity: 0; transition: opacity .3s; }

/* ensure the global image-list has the expected spacing */
#image-list { margin-top: .5rem; }

/* Additional helpers used during JS cleanup */
.flex-col { display: flex; flex-direction: column; gap: .4rem; }
.img-card { border: 1px solid rgba(0,0,0,0.04); border-radius: 6px; }
.text-ellipsis { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.w-120 { width: 120px; }
.w-100 { width: 100px; }
.footer-row { display:flex; justify-content:flex-end; margin-top:.6rem; }
.field-textarea-lg { min-height: 200px; }
.menu-section-items { margin-top: .6rem; }
.preview-section-details { margin-bottom: .5rem; }

/* Display helper utilities used by JS (show/hide variants) */
.show-inline-block { display: inline-block !important; }
.show-flex { display: flex !important; }
.hidden { display: none !important; }

/* Ensure generic modal-backdrop variants can be opened by adding .open */
.modal-backdrop.open { display: flex !important; align-items: center; justify-content: center; }
/* small layout helpers used by admin pages */
.space-between-row { display:flex; justify-content:space-between; align-items:center; padding:.4rem; border-bottom:1px solid var(--admin-border); }
.preview-box { margin-top:.6rem; background:var(--card-bg); padding:.6rem; border-radius:6px; border:1px solid var(--admin-border); }
